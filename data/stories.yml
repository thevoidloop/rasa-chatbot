version: "3.1"

stories:

# ===== FLUJOS DE CATÁLOGO PRINCIPAL =====

- story: saludo y consulta catálogo directo
  steps:
  - intent: saludar
  - action: utter_saludar
  - intent: consultar_catalogo
  - action: utter_catalogo_intro
  - action: action_mostrar_catalogo
  - action: utter_post_catalogo

- story: consulta catálogo directo sin saludo
  steps:
  - intent: consultar_catalogo
  - action: utter_catalogo_intro
  - action: action_mostrar_catalogo
  - action: utter_post_catalogo

- story: consulta catálogo luego precio específico
  steps:
  - intent: consultar_catalogo
  - action: utter_catalogo_intro
  - action: action_mostrar_catalogo
  - action: utter_post_catalogo
  - intent: consultar_precio
    entities:
    - producto: "camisa"
  - slot_was_set:
    - producto_seleccionado: "camisa"
  - action: action_consultar_precio

- story: consulta catálogo por categoría
  steps:
  - intent: consultar_catalogo_categoria
    entities:
    - categoria: "camisas"
  - slot_was_set:
    - categoria_seleccionada: "camisas"
  - action: action_mostrar_catalogo_categoria

# ===== FLUJOS CON SEGUIMIENTO =====

- story: catálogo y pedido directo
  steps:
  - intent: consultar_catalogo
  - action: utter_catalogo_intro
  - action: action_mostrar_catalogo
  - action: utter_post_catalogo
  - intent: hacer_pedido
    entities:
    - cantidad: 2
    - producto: "pantalón"
  - slot_was_set:
    - cantidad: 2
    - producto_seleccionado: "pantalón"
  - action: action_crear_pedido

- story: catálogo con consulta disponibilidad
  steps:
  - intent: consultar_catalogo
  - action: utter_catalogo_intro
  - action: action_mostrar_catalogo
  - action: utter_post_catalogo
  - intent: consultar_disponibilidad
    entities:
    - producto: "vestido"
  - slot_was_set:
    - producto_seleccionado: "vestido"
  - action: action_verificar_disponibilidad

# ===== FLUJOS CON AGRADECIMIENTOS =====

- story: catálogo con agradecimiento
  steps:
  - intent: consultar_catalogo
  - action: utter_catalogo_intro
  - action: action_mostrar_catalogo
  - action: utter_post_catalogo
  - intent: agradecer
  - action: utter_agradecer

# ===== FLUJOS COMPLETOS =====

- story: flujo completo saludo a despedida
  steps:
  - intent: saludar
  - action: utter_saludar
  - intent: consultar_catalogo
  - action: utter_catalogo_intro
  - action: action_mostrar_catalogo
  - action: utter_post_catalogo
  - intent: consultar_precio
    entities:
    - producto: "blusa"
  - slot_was_set:
    - producto_seleccionado: "blusa"
  - action: action_consultar_precio
  - intent: agradecer
  - action: utter_agradecer
  - intent: despedir
  - action: utter_despedir

# ===== FLUJOS DE ERROR O CASOS ESPECIALES =====

- story: mensaje fuera de contexto
  steps:
  - intent: out_of_scope
  - action: utter_fuera_de_contexto

- story: consulta catálogo después de out_of_scope
  steps:
  - intent: out_of_scope
  - action: utter_fuera_de_contexto
  - intent: consultar_catalogo
  - action: utter_catalogo_intro
  - action: action_mostrar_catalogo
  - action: utter_post_catalogo

# ===== FLUJOS ALTERNATIVOS =====

- story: múltiples consultas de catálogo
  steps:
  - intent: consultar_catalogo
  - action: utter_catalogo_intro
  - action: action_mostrar_catalogo
  - action: utter_post_catalogo
  - intent: consultar_catalogo_categoria
    entities:
    - categoria: "pantalones"
  - slot_was_set:
    - categoria_seleccionada: "pantalones"
  - action: action_mostrar_catalogo_categoria

- story: negativa después de ver catálogo
  steps:
  - intent: consultar_catalogo
  - action: utter_catalogo_intro
  - action: action_mostrar_catalogo
  - action: utter_post_catalogo
  - intent: negar
  - action: utter_despedir