version: "3.1"

rules:

# Reglas básicas de cortesía
- rule: Saludar siempre
  steps:
  - intent: saludar
  - action: utter_saludar

- rule: Despedirse siempre
  steps:
  - intent: despedir
  - action: utter_despedir

# Recuperar carrito al inicio de conversación (primera interacción)
- rule: Recuperar carrito automáticamente
  conversation_start: true
  steps:
  - action: action_recuperar_carrito

# Información de envíos
- rule: Proporcionar información de envíos
  steps:
  - intent: consultar_envios
  - action: utter_info_envios

# Información de pagos
- rule: Proporcionar información de pagos
  steps:
  - intent: consultar_pagos
  - action: utter_info_pagos

# Activar formulario de envío cuando usuario rechaza agregar más
- rule: Activar formulario después de rechazar agregar más
  steps:
  - intent: rechazar_agregar_mas
  - action: utter_solicitar_info_envio
  - action: shipping_info_form
  - active_loop: shipping_info_form

# Confirmar pedido cuando el formulario de envío se completa
- rule: Confirmar pedido después de completar formulario
  steps:
  - action: shipping_info_form
  - active_loop: null
  - action: action_confirmar_pedido