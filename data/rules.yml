version: "3.1"

rules:

- rule: Saludar siempre al inicio
  steps:
  - intent: saludar
  - action: utter_saludar

- rule: Despedirse siempre al final
  steps:
  - intent: despedir
  - action: utter_despedir

- rule: Respuesta a mensajes fuera de contexto
  steps:
  - intent: out_of_scope
  - action: utter_fuera_de_contexto

- rule: Manejo de interrupción en formulario
  condition:
  - active_loop: form_datos_cliente
  steps:
  - intent: cancelar_pedido
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_despedir

- rule: Continuar formulario después de proporcionar datos
  condition:
  - active_loop: form_datos_cliente
  steps:
  - intent: proporcionar_datos_cliente
  - action: form_datos_cliente
  - active_loop: null
  - action: action_confirmar_pedido_final

- rule: Generar cotización cuando se consulta precio directamente
  steps:
  - intent: consultar_precio
  - action: action_generar_cotizacion

- rule: Mostrar catálogo cuando se solicita
  steps:
  - intent: consultar_catalogo
  - action: action_mostrar_catalogo